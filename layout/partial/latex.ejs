<!-- latex公式渲染 -->

<%
var temp_latex = 0;
if (page.latex == null) {
  temp_latex = 1;
} else if (page.latex == 2) {
  temp_latex = 2;
} else {
  temp_latex = 1;
}
%>

<script>
  document.temp_latex = '<%- temp_latex %>';// 全局变量,latex公式渲染方式
</script>

<% if (temp_latex == 1) { %>
<!-- mathjax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [
        ['$','$'],
        ["\\(","\\)"]
      ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
  
  MathJax.Hub.Queue(function() { // 重新启动渲染
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
<script type="text/javascript" src="<%- theme.latex.mathjax %>"></script>
<% } else if (temp_latex == 2) { %>

<!-- katex -->
<link rel="stylesheet" href="<%- theme.latex.katex %>/dist/katex.min.css" integrity="sha384-dbVIfZGuN1Yq7/1Ocstc1lUEm+AT+/rCkibIcC/OmWo5f0EA48Vf8CytHzGrSwbQ" crossorigin="anonymous">
<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script defer src="<%- theme.latex.katex %>/dist/katex.min.js" integrity="sha384-2BKqo+exmr9su6dir+qCw08N2ZKRucY4PrGQPPWU1A7FtlCGjmEGFqXCv5nyM5Ij" crossorigin="anonymous"></script>
<!-- To automatically render math in text elements, include the auto-render extension: -->
<script defer src="<%- theme.latex.katex %>/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>

<script>
  $(document).ready(setTimeout(function()
  {
    renderMathInElement(document.body,
    {
      // ...options...
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
        // { left: "\\[", right: "\\]", display: true }
      ]
    });
  }, 500));
</script>
<% } %>